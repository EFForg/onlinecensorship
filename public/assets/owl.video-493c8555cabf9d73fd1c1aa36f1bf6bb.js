!function(e,t,i){var o=function(t){this._core=t,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":e.proxy(function(e){e.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.video&&this.isInFullScreen()&&e.preventDefault()},this),"refreshed.owl.carousel":e.proxy(function(e){e.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":e.proxy(function(e){e.namespace&&"position"===e.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":e.proxy(function(t){if(t.namespace){var i=e(t.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,e(t.content)))}},this)},this._core.options=e.extend({},o.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",e.proxy(function(e){this.play(e)},this))};o.Defaults={video:!1,videoHeight:!1,videoWidth:!1},o.prototype.fetch=function(e,t){var i=e.attr("data-vimeo-id")?"vimeo":"youtube",o=e.attr("data-vimeo-id")||e.attr("data-youtube-id"),s=e.attr("data-width")||this._core.settings.videoWidth,r=e.attr("data-height")||this._core.settings.videoHeight,a=e.attr("href");if(!a)throw new Error("Missing video URL.");if(o=a.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),o[3].indexOf("youtu")>-1)i="youtube";else{if(!(o[3].indexOf("vimeo")>-1))throw new Error("Video URL not supported.");i="vimeo"}o=o[6],this._videos[a]={type:i,id:o,width:s,height:r},t.attr("data-video",a),this.thumbnail(e,this._videos[a])},o.prototype.thumbnail=function(t,i){var o,s,r,a=i.width&&i.height?'style="width:'+i.width+"px;height:"+i.height+'px;"':"",n=t.find("img"),l="src",d="",h=this._core.settings,c=function(e){s='<div class="owl-video-play-icon"></div>',o=h.lazyLoad?'<div class="owl-video-tn '+d+'" '+l+'="'+e+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+e+')"></div>',t.after(o),t.after(s)};return t.wrap('<div class="owl-video-wrapper"'+a+"></div>"),this._core.settings.lazyLoad&&(l="data-src",d="owl-lazy"),n.length?(c(n.attr(l)),n.remove(),!1):void("youtube"===i.type?(r="http://img.youtube.com/vi/"+i.id+"/hqdefault.jpg",c(r)):"vimeo"===i.type&&e.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){r=e[0].thumbnail_large,c(r)}}))},o.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},o.prototype.play=function(t){var i,o=e(t.target),s=o.closest("."+this._core.settings.itemClass),r=this._videos[s.attr("data-video")],a=r.width||"100%",n=r.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),s=this._core.items(this._core.relative(s.index())),this._core.reset(s.index()),"youtube"===r.type?i='<iframe width="'+a+'" height="'+n+'" src="http://www.youtube.com/embed/'+r.id+"?autoplay=1&v="+r.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===r.type&&(i='<iframe src="http://player.vimeo.com/video/'+r.id+'?autoplay=1" width="'+a+'" height="'+n+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),e('<div class="owl-video-frame">'+i+"</div>").insertAfter(s.find(".owl-video")),this._playing=s.addClass("owl-video-playing"))},o.prototype.isInFullScreen=function(){var t=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return t&&e(t).parent().hasClass("owl-video-frame")},o.prototype.destroy=function(){var e,t;this._core.$element.off("click.owl.video");for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Video=o}(window.Zepto||window.jQuery,window,document);